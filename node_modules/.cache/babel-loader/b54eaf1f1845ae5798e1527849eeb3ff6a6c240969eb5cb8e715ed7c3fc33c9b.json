{"ast":null,"code":"var _jsxFileName = \"/Users/furb-x/Desktop/portfoio/REAL-LOYHALAR/afitsant-page/src/pages/auth/login.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { NavLink, useNavigate } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { setUser } from '../../redux/user';\nimport { useUser } from '../../redux/selectors';\nimport { toast } from 'react-toastify';\nimport { post } from '../../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Register = () => {\n  _s();\n  const user = useUser();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const [error, setError] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const onSubmit = form => {\n    form.preventDefault();\n    const {\n      phone = '',\n      password = ''\n    } = Object.fromEntries(new FormData(form.target));\n    if (!phone || !password) {\n      return setError(true);\n    }\n    setError(false);\n    setLoading(true);\n    post('auth/login', {\n      phone_number: phone,\n      password\n    }).then(({\n      data\n    }) => {\n      setLoading(false);\n      toast.success((data === null || data === void 0 ? void 0 : data.message) || 'Success');\n      dispatch(setUser(data === null || data === void 0 ? void 0 : data.result));\n      localStorage.setItem('user', JSON.stringify(data === null || data === void 0 ? void 0 : data.result));\n      navigate('/rooms', {\n        replace: true\n      });\n    }).catch(({\n      response\n    } = {\n      response: {}\n    }) => {\n      var _response$data, _response$data2;\n      setLoading(false);\n      toast.error(JSON.stringify((response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.errors) || (response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : _response$data2.result) || 'Xatolik yuz berdi !'));\n    });\n  };\n  useEffect(() => {\n    if (user !== null && user !== void 0 && user.id) {\n      navigate('/rooms', {\n        replace: true\n      });\n    }\n  }, [user === null || user === void 0 ? void 0 : user.id, navigate]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"background\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"shape\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"shape\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: onSubmit,\n      className: error ? 'error' : '',\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: 'Kirish'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"phone\",\n        children: \"Telefon raqami\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"tel\",\n        placeholder: \"998xxxyyzz\",\n        id: \"phone\",\n        name: \"phone\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"password\",\n        children: \"Parol\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Parol\",\n        id: \"password\",\n        name: \"password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"error\",\n        children: [\" \", error ? \"Ma'lumotlarni to'liq kiriting !\" : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading,\n        children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lds-dual-ring\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 22\n        }, this) : 'Kirish'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(NavLink, {\n        to: '/register',\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          children: \"Ro'yxatdan o'tish\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(Register, \"ELzIOwJc6gOu2woZApnc10lTevI=\", false, function () {\n  return [useUser, useDispatch, useNavigate];\n});\n_c = Register;\nexport default Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["React","useEffect","useState","NavLink","useNavigate","useDispatch","setUser","useUser","toast","post","jsxDEV","_jsxDEV","Fragment","_Fragment","Register","_s","user","dispatch","navigate","error","setError","loading","setLoading","onSubmit","form","preventDefault","phone","password","Object","fromEntries","FormData","target","phone_number","then","data","success","message","result","localStorage","setItem","JSON","stringify","replace","catch","response","_response$data","_response$data2","errors","id","children","className","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","type","placeholder","name","disabled","to","_c","$RefreshReg$"],"sources":["/Users/furb-x/Desktop/portfoio/REAL-LOYHALAR/afitsant-page/src/pages/auth/login.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { NavLink, useNavigate } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { setUser } from '../../redux/user';\nimport { useUser } from '../../redux/selectors';\nimport { toast } from 'react-toastify';\nimport { post } from '../../services/api';\n\nconst Register = () => {\n  const user = useUser();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const [error, setError] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const onSubmit = (form) => {\n    form.preventDefault();\n    const { phone = '', password = '' } = Object.fromEntries(new FormData(form.target));\n    if (!phone || !password) {\n      return setError(true);\n    }\n    setError(false);\n    setLoading(true);\n    post('auth/login', { phone_number: phone, password })\n      .then(({ data }) => {\n        setLoading(false);\n        toast.success(data?.message || 'Success');\n        dispatch(setUser(data?.result));\n        localStorage.setItem('user', JSON.stringify(data?.result));\n        navigate('/rooms', { replace: true });\n      })\n      .catch(({ response } = { response: {} }) => {\n        setLoading(false);\n        toast.error(JSON.stringify(response?.data?.errors || response?.data?.result || 'Xatolik yuz berdi !'));\n      });\n  };\n\n  useEffect(() => {\n    if (user?.id) {\n      navigate('/rooms', { replace: true });\n    }\n  }, [user?.id, navigate]);\n\n  return (\n    <>\n      <div className=\"background\">\n        <div className=\"shape\"></div>\n        <div className=\"shape\"></div>\n      </div>\n      <form onSubmit={onSubmit} className={error ? 'error' : ''}>\n        <h3>{'Kirish'}</h3>\n\n        <label htmlFor=\"phone\">Telefon raqami</label>\n        <input type=\"tel\" placeholder=\"998xxxyyzz\" id=\"phone\" name=\"phone\" />\n\n        <label htmlFor=\"password\">Parol</label>\n        <input type=\"password\" placeholder=\"Parol\" id=\"password\" name=\"password\" />\n        <label className=\"error\"> {error ? \"Ma'lumotlarni to'liq kiriting !\" : null}</label>\n        <button type=\"submit\" disabled={loading}>\n          {loading ? <div className=\"lds-dual-ring\" /> : 'Kirish'}\n        </button>\n        <NavLink to={'/register'}>\n          <button type=\"button\">{\"Ro'yxatdan o'tish\"}</button>\n        </NavLink>\n      </form>\n    </>\n  );\n};\n\nexport default Register;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}