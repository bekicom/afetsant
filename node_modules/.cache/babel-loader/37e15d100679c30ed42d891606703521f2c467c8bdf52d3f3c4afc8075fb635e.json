{"ast":null,"code":"import React,{useEffect,useState}from'react';import{NavLink,useNavigate}from'react-router-dom';import{useDispatch}from'react-redux';import{setUser}from'../../redux/user';import{useUser}from'../../redux/selectors';import{toast}from'react-toastify';import{post}from'../../services/api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Register=()=>{const user=useUser();const dispatch=useDispatch();const navigate=useNavigate();const[error,setError]=useState(false);const[loading,setLoading]=useState(false);const onSubmit=form=>{form.preventDefault();const{phone='',password=''}=Object.fromEntries(new FormData(form.target));if(!phone||!password){return setError(true);}setError(false);setLoading(true);post('auth/login',{phone_number:phone,password}).then(_ref=>{let{data}=_ref;setLoading(false);toast.success((data===null||data===void 0?void 0:data.message)||'Success');dispatch(setUser(data===null||data===void 0?void 0:data.result));localStorage.setItem('user',JSON.stringify(data===null||data===void 0?void 0:data.result));navigate('/rooms',{replace:true});}).catch(function(){var _response$data,_response$data2;let{response}=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{response:{}};setLoading(false);toast.error(JSON.stringify((response===null||response===void 0?void 0:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.errors)||(response===null||response===void 0?void 0:(_response$data2=response.data)===null||_response$data2===void 0?void 0:_response$data2.result)||'Xatolik yuz berdi !'));});};useEffect(()=>{if(user!==null&&user!==void 0&&user.id){navigate('/rooms',{replace:true});}},[user===null||user===void 0?void 0:user.id,navigate]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"background\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"shape\"}),/*#__PURE__*/_jsx(\"div\",{className:\"shape\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,className:error?'error':'',children:[/*#__PURE__*/_jsx(\"h3\",{children:'Kirish'}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",children:\"Telefon raqami\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",placeholder:\"998xxxyyzz\",id:\"phone\",name:\"phone\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Parol\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Parol\",id:\"password\",name:\"password\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"error\",children:[\" \",error?\"Ma'lumotlarni to'liq kiriting !\":null]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"lds-dual-ring\"}):'Kirish'}),/*#__PURE__*/_jsx(NavLink,{to:'/register',children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",children:\"Ro'yxatdan o'tish\"})})]})]});};export default Register;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}