{"ast":null,"code":"var _jsxFileName = \"/Users/furb-x/Desktop/portfoio/REAL-LOYHALAR/afitsant-page/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { Suspense, useEffect } from 'react';\nimport { Route, Routes, useLocation } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport routes from './routes';\nimport Header from 'components/header';\nimport { useUser } from './redux/selectors';\nimport { setRooms } from './redux/rooms';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SOCKET_SERVER_URL = 'ws://epos-admin.dadabayev.uz:8887/';\nconst privatPages = ['/register', '/login'];\nconst App = () => {\n  _s();\n  const {\n    pathname\n  } = useLocation();\n  const user = useUser();\n  const dispatch = useDispatch();\n  useEffect(() => {\n    const socket = new WebSocket(SOCKET_SERVER_URL); // Replace with your WebSocket server URL\n\n    socket.onopen = () => {\n      console.log('Connected to WebSocket server');\n      const message = JSON.stringify({\n        method: 'createUser',\n        ownerId: user === null || user === void 0 ? void 0 : user.id // Replace $owner_id with the actual owner ID value\n      });\n      socket.send(message);\n    };\n    socket.onmessage = event => {\n      const message = JSON.parse((event === null || event === void 0 ? void 0 : event.data) || '{}');\n      console.log(message);\n      if ((message === null || message === void 0 ? void 0 : message.method) === 'updateRooms') {\n        dispatch(setRooms(message === null || message === void 0 ? void 0 : message.rooms));\n      }\n    };\n    socket.onclose = () => {\n      console.log('Disconnected from WebSocket server');\n    };\n    return () => {\n      socket.close();\n    };\n  }, [user === null || user === void 0 ? void 0 : user.id]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [privatPages.includes(pathname) ? null : /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 48\n    }, this), /*#__PURE__*/_jsxDEV(Suspense, {\n      fallback: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lds-dual-ring app-loader\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 27\n      }, this),\n      children: /*#__PURE__*/_jsxDEV(Routes, {\n        children: routes.map(route => /*#__PURE__*/_jsxDEV(Route, {\n          path: route.path,\n          element: route.element\n        }, route.path, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"rbNhEz4JFkZv0BrOT4p+0m4VguI=\", false, function () {\n  return [useLocation, useUser, useDispatch];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","Suspense","useEffect","Route","Routes","useLocation","useDispatch","routes","Header","useUser","setRooms","jsxDEV","_jsxDEV","SOCKET_SERVER_URL","privatPages","App","_s","pathname","user","dispatch","socket","WebSocket","onopen","console","log","message","JSON","stringify","method","ownerId","id","send","onmessage","event","parse","data","rooms","onclose","close","className","children","includes","fileName","_jsxFileName","lineNumber","columnNumber","fallback","map","route","path","element","_c","$RefreshReg$"],"sources":["/Users/furb-x/Desktop/portfoio/REAL-LOYHALAR/afitsant-page/src/App.js"],"sourcesContent":["import React, { Suspense, useEffect } from 'react';\nimport { Route, Routes, useLocation } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport routes from './routes';\nimport Header from 'components/header';\nimport { useUser } from './redux/selectors';\nimport { setRooms } from './redux/rooms';\n\nconst SOCKET_SERVER_URL = 'ws://epos-admin.dadabayev.uz:8887/';\n\nconst privatPages = ['/register', '/login'];\n\nconst App = () => {\n  const { pathname } = useLocation();\n  const user = useUser();\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    const socket = new WebSocket(SOCKET_SERVER_URL); // Replace with your WebSocket server URL\n\n    socket.onopen = () => {\n      console.log('Connected to WebSocket server');\n\n      const message = JSON.stringify({\n        method: 'createUser',\n        ownerId: user?.id // Replace $owner_id with the actual owner ID value\n      });\n\n      socket.send(message);\n    };\n\n    socket.onmessage = (event) => {\n      const message = JSON.parse(event?.data || '{}');\n      console.log(message);\n      if (message?.method === 'updateRooms') {\n        dispatch(setRooms(message?.rooms));\n      }\n    };\n\n    socket.onclose = () => {\n      console.log('Disconnected from WebSocket server');\n    };\n    return () => {\n      socket.close();\n    };\n  }, [user?.id]);\n\n  return (\n    <div className=\"container\">\n      {privatPages.includes(pathname) ? null : <Header />}\n      <Suspense fallback={<div className=\"lds-dual-ring app-loader\" />}>\n        <Routes>\n          {routes.map((route) => (\n            <Route key={route.path} path={route.path} element={route.element} />\n          ))}\n        </Routes>\n      </Suspense>\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}