{"ast":null,"code":"/* eslint-disable react/prop-types */import React,{useState}from'react';import{Minus}from'assets/icon';import{formatCurrencyUZS}from'utils';import{postRequest}from'services/api';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const OrderList=_ref=>{var _formatCurrencyUZS;let{product,loading,setLoading,room,token,onUpdated}=_ref;const[returnedProduct,setReturnedProduct]=useState(0);const handleRemoveProduct=()=>{if(!(product!==null&&product!==void 0&&product.id)){return toast.error('Maxsulot topilmadi');}if((product===null||product===void 0?void 0:product.quantity)>1&&!returnedProduct){return toast.info(\"Qaytarilgan maxsulotlar sonini tanlang!\");}const formData={room_id:room,products_id:[product===null||product===void 0?void 0:product.id],products_quantity:[(product===null||product===void 0?void 0:product.quantity)===1?1:returnedProduct],action:'minus'};setLoading(true);postRequest('room/merge',formData,token).then(_ref2=>{let{data}=_ref2;toast.success(data===null||data===void 0?void 0:data.result);setLoading(false);setReturnedProduct(0);onUpdated();}).catch(err=>{setLoading(false);console.log(err);});};return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"button\",{disabled:loading,className:\"remove\",onClick:handleRemoveProduct,children:loading?/*#__PURE__*/_jsx(\"div\",{className:\"lds-dual-ring\"}):/*#__PURE__*/_jsx(Minus,{})}),/*#__PURE__*/_jsxs(\"strong\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\" \",product===null||product===void 0?void 0:product.name]}),\" \",/*#__PURE__*/_jsxs(\"span\",{children:[product===null||product===void 0?void 0:product.quantity,\"X\"]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Narxi \",\"\".concat((_formatCurrencyUZS=formatCurrencyUZS(product===null||product===void 0?void 0:product.total))===null||_formatCurrencyUZS===void 0?void 0:_formatCurrencyUZS.replace('UZS',''),\" UZS\")]}),(product===null||product===void 0?void 0:product.quantity)>1&&/*#__PURE__*/_jsxs(\"strong\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Qaytarilgan maxsulotlar\"}),/*#__PURE__*/_jsx(\"select\",{className:\"returned-product\",onChange:e=>setReturnedProduct(e.target.value),children:Array.from({length:product===null||product===void 0?void 0:product.quantity}).map((_,index)=>/*#__PURE__*/_jsx(\"option\",{value:index,children:index},index))})]})]},product===null||product===void 0?void 0:product.name);};export default OrderList;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}